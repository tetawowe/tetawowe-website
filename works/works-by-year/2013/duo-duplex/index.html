<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="../../../../header/favicon.ico">
  <title>Duo Duplex</title>

  <!-- header.css 和 header.js -->
  <link rel="stylesheet" href="../../../../header/header.css">

  <!-- 复用 project.css -->
  <link rel="stylesheet" href="../../../../project/project.css">

  <!-- special 项目的覆盖样式 -->
    <style>

      .description {
    max-width: 965px;   /* 限制最大宽度 */
    margin: 40px auto;  /* 居中容器 */
    text-align: left;   /* 内容左对齐 */
    margin-top: 20px;
    margin-bottom: -15px;
  }

      /* meta + description 容器：左右并排，顶端对齐 */
      #meta-text-wrapper {
        display: flex;
        gap: 40px;
        align-items: flex-start;  /* 顶端对齐 */
        margin: 24px auto;
        max-width: 965px;
        margin-top: 15px;   /* 强制顶端对齐 */
      }

      #project-meta {
        flex: 0 0 200px;  /* 固定左栏宽度 */
      }

      #project-meta h2 {
        margin: 0 0 0 0;
      }

      #project-text {
        flex: 1;
        margin-top: 0;   /* 强制顶端对齐 */
        font-size: 14px;
        line-height: 1.6;
        margin-top: -21px; /* 数字可以自己调，比如 -4px, -8px */
      }

  /* gallery 总容器：大图 + 右侧（间隔 25px）*/
    .gallery-wrapper {
      display: flex;
      gap: 20px;             /* 大图与右侧的间隔 */
      max-width: 965px;
      margin: 40px auto;
      align-items: flex-start;
    }

    /* 左边大图：固定 635 x 800，居中裁剪 */
    .gallery-main {
      flex: 0 0 640px;       /* 固定宽度 */
      width: 640px;
      height: 800px;         /* 固定高度 */
      display: block;
      object-fit: cover;     /* 居中裁剪 */
      object-position: center;
      background: #efefef;   /* 图还没载入时的占位色，可删 */
    }

    /* 右侧整体容器：固定宽度以容纳 3 列 95px 缩略图 (3*95 + 2*10 = 305px) */
    .gallery-side {
      flex: 0 0 305px;       /* 固定宽度，确保缩略图 3 列稳定 */
      height: 800px;         /* 与大图高度一致，使文字可固定在底部 */
      display: flex;
      flex-direction: column;
      justify-content: space-between; /* 缩略图靠上，文字靠下 */
      align-items: flex-start;        /* 文字左对齐 */
    }

    /* 缩略图容器（3 列）*/
    .gallery-thumbs {
      display: grid;
      grid-template-columns: repeat(3, 95px); /* 每列固定 95px */
      grid-auto-rows: 95px;                   /* 行高也固定 95px */
      gap: 10px;                               /* 缩略图之间间隔 10px */
      margin: 0;
      padding: 0;
    }

    /* 缩略图 */
    .gallery-thumb {
      width: 95px;
      height: 95px;
      object-fit: cover;
      object-position: center;
      cursor: pointer;
      opacity: 0.8;
      display: block;
      border: 0;
      transition: transform 0.15s ease, opacity 0.15s ease;
      background: #ddd;
    }

    .gallery-thumb:hover {
      opacity: 1;
      transform: translateY(-2px);
    }

    .gallery-thumb.active {
      opacity: 1;
      outline: 2px solid rgba(0,0,0,0.12);
    }

    /* 右下文字：左对齐并固定在底部 */
    .gallery-text {
      width: 100%;
      box-sizing: border-box;
      padding-top: 12px;
      text-align: left;     /* 左对齐 */
      font-size: 16px;
      line-height: 1.6;
      color: #333;
      margin-bottom: -17px;
    }
      .gallery1 {
        display: flex;
        max-width: 965px;
        width: 100%;
        gap: 25px; /* 控制图片之间的间隔 */
        justify-content: center; /* 居中整个区域，可以改成 flex-start 左对齐 */
        margin: 40px auto;  /* 居中容器 */
        margin-top: 70px;
      }

      .item {
        text-align: center; /* 让文字居中 */
        width: 305px; /* 固定每张图片的宽度，可调整 */
      }

      .item img {
          width: 100%;
          height: 450px;           /* 固定高度 */
          object-fit: cover;       /* 居中裁剪 */
          object-position: center; /* 水平居中，垂直居中 */
          display: block;
      }

      .caption {
        margin-top: 8px;
        font-size: 16px;
        line-height: 1.4;
        text-align: justify;  /* 文字两端对齐 */
        margin-bottom: 50px;
      }

  /* Lightbox 样式 */
      #lightbox {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0; top: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.9);
        align-items: center;
        justify-content: center;
      }
      #lightbox img {
        max-width: 90%;
        max-height: 90%;
      }

  #lightbox-close {
    position: absolute;
    top: 20px;
    right: 40px;
    font-size: 40px;
    color: #fff;
    cursor: pointer;
    user-select: none;
  }

    /* 小屏幕处理：整体改为上下堆叠（大图在上，缩略图与文字在下） */
    @media (max-width: 768px) {
    #meta-text-wrapper {
      flex-direction: column;
    }

    #project-meta {
      flex: none;
      width: 100%;
    }

    #project-first-image img {
    max-width: 965px;
    width: 100%;
    height: 285px;             /* 固定高度 */
    object-fit: cover;         /* 超出部分裁剪 */
    object-position: center;   /* 裁剪时居中 */
    display: block;
    margin: 0 auto 0px auto;
  }

  #project-meta {
    width: 350px;
    display: grid;
    grid-template-columns: 125px 1fr; /* 左侧固定 85px，右侧自适应 */
    gap: 8px 0;                      /* 行间距 */
    font-size: 14px;
    color: #525252; 
    line-height: 1.1;
    margin-left: 15px;
    margin-top: -5px;
  }

  #project-meta h2 {
    grid-column: 1 / -1;  /* 标题独占整行 */
    margin-top: 0;
    margin-bottom: 0px;
    font-size: 16px;
    color: #2e2e2e;
  }

  #project-text {
    font-size: 14px;
    flex: none;
    color: #333;
    line-height: 1.6;
    white-space: pre-line;
    margin: 0px 15px 35px 15px; /* 左右留白15px，下方间距75px，上方为0 */
  }

  .project-image {
    max-width: 965px;
    width: 100%;
    display: block;
    margin: 0px auto; /* 居中并留点间隔 */
    margin-top: 15px;
  }

  .middle-description {
    max-width: 965px;
    margin: 0px auto; /* 水平居中 + 上下间距 */
    line-height: 1.6;
    font-size: 14px;
    padding: 0 20px;   /* 保证小屏幕也有左右留白 */
    white-space: pre-line; /* 保持换行 */
    margin-bottom: 50px;
    margin-top: 50px;
  }

  .description {
    max-width: 965px;
    margin: 0px auto; /* 水平居中 + 上下间距 */
    line-height: 1.6;
    font-size: 14px;
    padding: 0 20px;   /* 保证小屏幕也有左右留白 */
    white-space: pre-line; /* 保持换行 */
    margin-top: 10px;    /* 缩小上间距 */
    margin-bottom: 50px; /* 缩小下间距 */
  }

  /* gallery-wrapper 改为上下堆叠 */
    .gallery-wrapper {
      flex-direction: column;
      align-items: center;
      margin-top: 0px;
      margin-bottom: 0px;
      gap: 0px; /* 保证上下紧密 */
    }

    /* 大图占满宽度 */
    .gallery-main {
      width: 100%;
      max-width: 100%;
      height: auto;   /* 高度自适应 */
    }

    /* 下方容器 */
    .gallery-side {
      height: auto;              /* 取消固定高度 */
    flex: none;         /* 不再撑满高度 */
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start; /* 改为 flex-start 而不是 space-between */
    margin: 0;
    padding: 0;
    }

    /* 缩略图改为一行6个固定宽度的网格 */
    .gallery-thumbs {
      display: grid;
      grid-template-columns: repeat(6, minmax(0, 1fr)); /* 每列自动撑满父容器 */
      grid-auto-rows: 65px; /* 固定行高 */
      gap: 2px 6px;         /* 上下、左右间距 */
      width: 100%;           /* 撑满父容器 */
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    .gallery-thumb {
      width: 100%;   /* 填满格子 */
      height: 60px;  /* 可根据需要调整 */
      margin: 0;     /* 避免多余外边距 */
      padding: 0;    /* 避免多余内边距 */
    }

    /* gallery-text 放到最下方，占满宽度 */
    .gallery-text {
      text-align: left;
      padding: 0 10px; /* 保留左右留白 */
      line-height: 1.6;
      font-size: 14px;
      margin: 0px 25px 35px 25px; /* 左右留白15px，下方间距75px，上方为0 */
    }

      .gallery1 {
    flex-direction: column;      /* 上下堆叠 */
    gap: 15px;                   /* 每行间距 */
    margin: 20px auto;
  }

  .gallery1 .item {
    display: flex;               /* 左右排列 */
    flex-direction: row;         
    align-items: flex-start;
    width: 100%;                 /* 占满容器 */
    gap: 10px;                   /* 图片与文字间距 */
  }

  .gallery1 .item img {
    width: 40%;                   /* 图片占 40% 宽度，可调整 */
    height: auto;                 /* 高度自适应 */
    object-fit: cover;
  }

  .gallery1 .caption {
    width: 60%;                   /* 文字占 60% */
    margin-right: 15px;
    font-size: 14px;              /* 调整文字大小 */
    line-height: 1.4;
    text-align: left;             /* 左对齐 */
  }

    }
    </style>
  </head>
  <body>
    <header id="header-placeholder"></header>

    <main id="project-container" class="special-main">

      <!-- 001 封面 -->
      <div id="project-first-image">
        <img src="001.jpg" alt="Duo Duplex — Cover">
      </div>

      <!-- meta + 主描述 -->
      <div id="meta-text-wrapper">
        <div id="project-meta">
          <h2>Duo Duplex</h2>
          <div class="label">Year</div><div class="value">2013</div>
          <div class="label">Type</div><div class="value">Residential</div>
        </div>

        <div id="project-text">
          The Duo Duplex is a three storey house built using the concept of interlocking multiple duplex blocks to form a singular construct.<br>
          Materials were engaged in a raw sense to exaggerate the duality of the complex; each material was chosen and formed accordingly to the idea present in each individual floor. 
          </div>
      </div>

      <div id="gallery"></div>

          <div class="description">
          <strong>Duplex 01</strong><br><br>
          Housing the ground floor and the rear side of the first floor, the first duplex consists of a kitchen, living room and 2 en-suite bedrooms with baths. It is accessible through the front yard and a backdoor on the opposite side. The unit functions on its own as a studio and is connected to its subsequent with a stair core made of black steel sheet facing towards clear tempered glass; this not only allows high permeability of daylight, but also helps convey a sense transparency.
          <br><br><strong>Duplex 02</strong><br><br>
          Accessed through a flight of stairs, the second duplex encloses the front side of the first floor and its attic above. Parts of the duplex include a kitchen, living room that connects to a balcony, a mezzanine sleeping deck, an en-suite bedroom with a bathtub, and a roof garden. The layout of this unit is more structured in comparison to the duplex below. The doors, when folded to the sides, connects the living space with the kitchen revealing a larger space allowance. In compensation to the land's neighbouring borders, an additional floor was added in order to fit the third bedroom. The second duplex is also accessible through multiple access points that are separated from the preceding unit, this was done with the intent to make the house more user-friendly.
  </div>


      <div id="project-images">
        <img class="project-image" src="014.jpeg" alt="014 — Duo Duplex">
        <img class="project-image" src="013.jpg" alt="013 — Duo Duplex">
        <img class="project-image" src="015.jpg" alt="015 — Duo Duplex">
      </div>

      <div class="description">
          The intricate details and spatial planning put into the design was conscious towards its masculine construction type. The steel stairs, timber deck, courtyard and the roof garden all possess respective personalities of their own. It comes together to form the duplex as a whole, and to do so, conventional services and finishes were put to high attention as a subtlety. 
        </div>

          <div class="gallery1">
      <div class="item">
        <img src="016.jpg" alt="照片1">
        <div class="caption">Gravity pulls and gather rainwater down the weighted cables and into the pond below. This renders the need of rainwater pipe redundant.</div>
      </div>
      <div class="item">
        <img src="017.jpg" alt="照片2">
        <div class="caption">The roof garden overlooks the scintillating skyline of Kuala Lumpur. It enhances the living essence within the space leaving one with a feeling of rejuvenation.</div>
      </div>
      <div class="item">
        <img src="018.jpg" alt="照片3">
        <div class="caption">Fenestration employed within space to cultivate user's connection to nature at any given time.</div>
      </div>
    </div>

    <div id="lightbox">
      <span id="lightbox-close">&times;</span>
    <img src="" alt="Lightbox Image">
  </div>

    </main>

  <script src="../../../../header/header.js">  </script>

      <script>
  const gallery = [
      "002.jpg","003.jpg","004.jpg","005.jpg","006.jpg",
      "007.jpg","008.jpg","009.jpg","010.jpg","011.jpg","012.jpg"
    ];

    function renderGallery(imgList, containerId) {
      if (!imgList || imgList.length === 0) return;

      // 清空目标容器（避免重复渲染）
      const container = document.getElementById(containerId);
      container.innerHTML = "";

      const galleryWrapper = document.createElement("div");
      galleryWrapper.className = "gallery-wrapper";

      // ---- 大图（左） ----
      const mainImg = document.createElement("img");
      mainImg.className = "gallery-main";
      mainImg.src = imgList[0];
      mainImg.alt = "Project image 1";
      galleryWrapper.appendChild(mainImg);

      // ---- 右侧（缩略图 + 底部文字） ----
      const sideDiv = document.createElement("div");
      sideDiv.className = "gallery-side";

      // 缩略图容器（顶部）
      const thumbs = document.createElement("div");
      thumbs.className = "gallery-thumbs";

      imgList.forEach((src, index) => {
        const thumb = document.createElement("img");
        thumb.src = src;
        thumb.alt = `Thumb ${index+1}`;
        thumb.className = "gallery-thumb";
        thumb.width = 95;
        thumb.height = 95;
        if (index === 0) thumb.classList.add("active");

        thumb.addEventListener("click", () => {
          // 切换大图
          mainImg.src = src;
          // 更新 active 状态
          thumbs.querySelectorAll(".gallery-thumb").forEach(t => t.classList.remove("active"));
          thumb.classList.add("active");
        });

        thumbs.appendChild(thumb);
      });

      sideDiv.appendChild(thumbs);

      // 文字（固定在右侧底部）
      const textDiv = document.createElement("div");
      textDiv.className = "gallery-text";
      textDiv.innerHTML = `
        <p>
          The ground floor portrays as a solid base, wherein the idea of rigidity was conveyed 
          through the utilization of raw concrete, clay bricks and exposed services. The first floor 
          on the other hand, expresses a lighter void revolving around transparency. It was achieved 
          using glass, steel cables and wire mesh. Each floor delivers a story of its own, shaping a 
          type of conflict as if one found in a story book.
        </p>
      `;
      sideDiv.appendChild(textDiv);

      galleryWrapper.appendChild(sideDiv);

      container.appendChild(galleryWrapper);
    }

    // 渲染 gallery
    renderGallery(gallery, "gallery");

    // ============================
    // Lightbox 功能
    // ============================
    function enableLightbox() {
      // 创建 Lightbox DOM
      let lightbox = document.getElementById("lightbox");
      if (!lightbox) {
        lightbox = document.createElement("div");
        lightbox.id = "lightbox";
        lightbox.innerHTML = '<span id="lightbox-close">&times;</span><img src="" alt="Lightbox Image">';
        document.body.appendChild(lightbox);
      }

      const lightboxImg = lightbox.querySelector("img");
      const lightboxClose = lightbox.querySelector("#lightbox-close");

  // 选择所有大图：普通项目图片 + gallery 大图 + 封面
  const allBigImages = document.querySelectorAll(".project-image, .gallery-main, #project-first-image img");


      allBigImages.forEach(img => {
        img.style.cursor = "pointer";
        img.addEventListener("click", () => {
          lightboxImg.src = img.src;
          lightbox.style.display = "flex";
        });
      });

      // 点击背景关闭
      lightbox.addEventListener("click", (e) => {
        if (e.target === lightbox) lightbox.style.display = "none";
      });

      // 点击右上角 × 关闭
      lightboxClose.addEventListener("click", () => {
        lightbox.style.display = "none";
      });
    }

    // 页面加载时启用 Lightbox
    window.addEventListener("load", enableLightbox);

    // 调整位置的函数（可选，如果不需要固定高度可以去掉）
    function adjustProjectImage() {
      if (window.innerWidth <= 768) return; // 手机模式不调整
      const galleries = document.querySelectorAll(".gallery-wrapper");
      if (!galleries.length) return;

      galleries.forEach(gallery => {
        const topContentHeight = gallery.getBoundingClientRect().top + window.scrollY;

        if (topContentHeight < 900) {
          gallery.style.marginTop = (950 - topContentHeight) + "px";
        } else {
          gallery.style.marginTop = "50px";
        }
      });
    }

    // 页面加载时执行一次
    window.addEventListener("load", adjustProjectImage);
    // 窗口大小变动时也重算
    window.addEventListener("resize", adjustProjectImage);
  </script>
  </body>
  </html>
